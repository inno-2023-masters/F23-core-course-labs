# 1.2

```
PS G:\git\core-course-labs> kubectl create secret generic secret_val --from-literal=token=SECRET
secret/secret created

PS G:\git\core-course-labs> kubectl describe secret secret_val
Name:         secret_val
Namespace:    default
Labels:       <none>
Annotations:  <none>

Type:  Opaque

Data
====
token:  12 bytes

PS G:\git\core-course-labs> Write-Output ([System.Text.Encoding]::Utf8.GetString([System.Convert]::FromBase64String((kubectl get secret secret_val -o jsonpath='{.data.token}'))))
SECRET
```

# 1.3

```
dmpru@dmpru:/mnt/g/git/core-course-labs/k8s/helm/app-python$ kubectl get po
NAME                          READY   STATUS    RESTARTS      AGE
app-python-55cc67d774-tr9wh   1/1     Running   0             3m43s

dmpru@dmpru:/mnt/g/git/core-course-labs/k8s/helm/app-python$ kubectl exec app-python-55cc67d774-tr9wh -- printenv | grep "SECRET"
SECRET=SECRET_VALUE
```

# 2.1

```
$ cat /vault/secrets/database-config.txt
SECRET_VAL:SECRET_VAULT
$ df -h
Filesystem      Size  Used Avail Use% Mounted on
overlay        1007G   13G  943G   2% /
tmpfs            64M     0   64M   0% /dev
tmpfs           8.4G  4.0K  8.4G   0% /vault/secrets
tmpfs           2.5G     0  2.5G   0% /sys/fs/cgroup
/dev/sde       1007G   13G  943G   2% /etc/hosts
shm              64M     0   64M   0% /dev/shm
tmpfs           128M   12K  128M   1% /run/secrets/kubernetes.io/serviceaccount
tmpfs           2.5G     0  2.5G   0% /proc/asound
tmpfs           2.5G     0  2.5G   0% /proc/acpi
tmpfs           2.5G     0  2.5G   0% /proc/scsi
tmpfs           2.5G     0  2.5G   0% /sys/firmware
```

# Bonus task

```
dmpru@dmpru:/mnt/g/git/core-course-labs/k8s/helm/app-python$ kubectl describe po app-python-5c955765db-29wlh
Name:             app-python-5c955765db-29wlh
Namespace:        default
Priority:         0
Service Account:  app-python
Node:             minikube/192.168.49.2
Start Time:       Wed, 15 Nov 2023 05:03:32 +0300
Labels:           app.kubernetes.io/instance=app-python
                  app.kubernetes.io/managed-by=Helm
                  app.kubernetes.io/name=app-python
                  app.kubernetes.io/version=1.16.0
                  helm.sh/chart=app-python-0.1.0
                  pod-template-hash=5c955765db
                  test=test
Annotations:      <none>
Status:           Running
IP:               10.244.0.24
IPs:
  IP:           10.244.0.24
Controlled By:  ReplicaSet/app-python-5c955765db
Containers:
  app-python:
    Container ID:   docker://b0663c31c23c7f96476b4aef10b2d4e9741f9f890f7dd515666ce379a649ee7c
    Image:          dmitriypru/core_course_labs_python:latest
    Image ID:       docker-pullable://dmitriypru/core_course_labs_python@sha256:a03171431201bbd5291248779c46463f6fd5a46a9d297a4420d6ab61b4ac8e7e
    Port:           8000/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Wed, 15 Nov 2023 05:04:33 +0300
    Last State:     Terminated
      Reason:       Error
      Exit Code:    137
      Started:      Wed, 15 Nov 2023 05:03:34 +0300
      Finished:     Wed, 15 Nov 2023 05:04:33 +0300
    Ready:          False
    Restart Count:  1
    Limits:
      cpu:     100m
      memory:  128Mi
    Requests:
      cpu:      100m
      memory:   128Mi
    Liveness:   http-get http://:8000/ delay=0s timeout=1s period=10s #success=1 #failure=3
    Readiness:  http-get http://:8000/ delay=0s timeout=1s period=10s #success=1 #failure=3
    Environment:
      PYTHON_ENV:  TEST
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-4nmp5 (ro)
Conditions:
  Type              Status
  Initialized       True
  Ready             False
  ContainersReady   False
  PodScheduled      True
Volumes:
  kube-api-access-4nmp5:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   Guaranteed
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason     Age                From               Message
  ----     ------     ----               ----               -------
  Normal   Scheduled  94s                default-scheduler  Successfully assigned default/app-python-5c955765db-29wlh to minikube
  Normal   Killing    64s                kubelet            Container app-python failed liveness probe, will be restarted
  Normal   Pulled     33s (x2 over 93s)  kubelet            Container image "dmitriypru/core_course_labs_python:latest" already present on machine
  Normal   Created    33s (x2 over 93s)  kubelet            Created container app-python
  Normal   Started    33s (x2 over 92s)  kubelet            Started container app-python
  Warning  Unhealthy  24s (x6 over 91s)  kubelet            Readiness probe failed: Get "http://10.244.0.24:8000/": dial tcp 10.244.0.24:8000: connect: connection refused
  Warning  Unhealthy  24s (x2 over 84s)  kubelet            Liveness probe failed: Get "http://10.244.0.24:8000/": dial tcp 10.244.0.24:8000: connect: connection refused
  Warning  Unhealthy  14s (x3 over 74s)  kubelet            Liveness probe failed: HTTP probe failed with statuscode: 404
  Warning  Unhealthy  14s (x7 over 74s)  kubelet            Readiness probe failed: HTTP probe failed with statuscode: 404
```

```
dmpru@dmpru:/mnt/g/git/core-course-labs/k8s/helm/app-python$ kubectl describe po app-csharp-594c8f5b9b-gr2l4
Name:             app-csharp-594c8f5b9b-gr2l4
Namespace:        default
Priority:         0
Service Account:  app-csharp
Node:             minikube/192.168.49.2
Start Time:       Wed, 15 Nov 2023 05:06:51 +0300
Labels:           app.kubernetes.io/instance=app-csharp
                  app.kubernetes.io/managed-by=Helm
                  app.kubernetes.io/name=app-csharp
                  app.kubernetes.io/version=1.16.0
                  helm.sh/chart=app-csharp-0.1.0
                  pod-template-hash=594c8f5b9b
                  test=test
Annotations:      <none>
Status:           Running
IP:               10.244.0.25
IPs:
  IP:           10.244.0.25
Controlled By:  ReplicaSet/app-csharp-594c8f5b9b
Containers:
  app-csharp:
    Container ID:   docker://459a713c1e50eced86cff9324264e034cddb8fbcaf403952138c114e195c5265
    Image:          dmitriypru/core_course_labs_csharp:latest
    Image ID:       docker-pullable://dmitriypru/core_course_labs_csharp@sha256:b3c45714d05d140f000a6618dbe5fe65300f56d676f3c448bf14c34551546b48
    Port:           80/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Wed, 15 Nov 2023 05:07:33 +0300
    Last State:     Terminated
      Reason:       Completed
      Exit Code:    0
      Started:      Wed, 15 Nov 2023 05:07:09 +0300
      Finished:     Wed, 15 Nov 2023 05:07:32 +0300
    Ready:          False
    Restart Count:  1
    Limits:
      cpu:     100m
      memory:  128Mi
    Requests:
      cpu:      100m
      memory:   128Mi
    Liveness:   http-get http://:http/ delay=0s timeout=1s period=10s #success=1 #failure=3
    Readiness:  http-get http://:http/ delay=0s timeout=1s period=10s #success=1 #failure=3
    Environment:
      CSHARP_ENV:  TEST
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-78pf6 (ro)
Conditions:
  Type              Status
  Initialized       True
  Ready             False
  ContainersReady   False
  PodScheduled      True
Volumes:
  kube-api-access-78pf6:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   Guaranteed
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason     Age                From               Message
  ----     ------     ----               ----               -------
  Normal   Scheduled  67s                default-scheduler  Successfully assigned default/app-csharp-594c8f5b9b-gr2l4 to minikube
  Normal   Pulling    66s                kubelet            Pulling image "dmitriypru/core_course_labs_csharp:latest"
  Normal   Pulled     50s                kubelet            Successfully pulled image "dmitriypru/core_course_labs_csharp:latest" in 15.877557814s (15.877565914s including waiting)
  Warning  Unhealthy  46s                kubelet            Liveness probe failed: Get "http://10.244.0.25:80/": dial tcp 10.244.0.25:80: connect: connection refused
  Normal   Created    26s (x2 over 49s)  kubelet            Created container app-csharp
  Normal   Killing    26s                kubelet            Container app-csharp failed liveness probe, will be restarted
  Normal   Pulled     26s                kubelet            Container image "dmitriypru/core_course_labs_csharp:latest" already present on machine
  Normal   Started    25s (x2 over 49s)  kubelet            Started container app-csharp
  Warning  Unhealthy  24s (x5 over 48s)  kubelet            Readiness probe failed: Get "http://10.244.0.25:80/": dial tcp 10.244.0.25:80: connect: connection refused
  Warning  Unhealthy  15s (x2 over 35s)  kubelet            Liveness probe failed: Get "http://10.244.0.25:80/": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
  Warning  Unhealthy  15s (x2 over 35s)  kubelet            Readiness probe failed: Get "http://10.244.0.25:80/": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
  Warning  Unhealthy  6s (x3 over 26s)   kubelet            Readiness probe failed: HTTP probe failed with statuscode: 404
  Warning  Unhealthy  6s (x2 over 26s)   kubelet            Liveness probe failed: HTTP probe failed with statuscode: 404
```
