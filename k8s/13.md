# StatefulSet

### `kubectl get po,sts,svc,pvc`
```bash
NAME                                     READY   STATUS    RESTARTS   AGE
pod/chart-1701168705-app-python-helm-0   1/1     Running   0          109s
pod/chart-1701168705-app-python-helm-1   1/1     Running   0          109s
pod/chart-1701168705-app-python-helm-2   1/1     Running   0          109s

NAME                                                READY   AGE
statefulset.apps/chart-1701168705-app-python-helm   3/3     109s

NAME                                       TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)   AGE
service/chart-1701168705-app-python-helm   ClusterIP   10.111.234.5   <none>        80/TCP    109s
service/kubernetes                         ClusterIP   10.96.0.1      <none>        443/TCP   2m31s

NAME                                                                              STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
persistentvolumeclaim/persistent-data-volume-chart-1701168705-app-python-helm-0   Bound    pvc-135cfcdf-608c-4a42-93f2-dad38ef9f0ee   100Mi      RWO            standard       109s
persistentvolumeclaim/persistent-data-volume-chart-1701168705-app-python-helm-1   Bound    pvc-43824fbc-1bb5-4227-82f0-6f09c3d898c4   100Mi      RWO            standard       109s
persistentvolumeclaim/persistent-data-volume-chart-1701168705-app-python-helm-2   Bound    pvc-7d46f0fa-dfeb-4868-8152-f2fffeba0500   100Mi      RWO            standard       109s
```

### Visits in each pod
```bash
kubectl exec pod/chart-1701168705-app-python-helm-0 -- cat storage/visits
5                                      
```

```bash
kubectl exec pod/chart-1701168705-app-python-helm-1 -- cat storage/visits
7
```

```bash
kubectl exec pod/chart-1701168705-app-python-helm-2 -- cat storage/visits
4
```

The number of visits in pods differ, beacuse each one has its persistent volume, that is isolated from another. Thus, each pod has its private `storage/visits` and counts only its own visits.

### Ordering guarantee

In the case of StatefulSet usage, we manage a group of distinct pods. Each operates independently, without sharing states or volumes, while providing an identical service on an individual basis. As a result, the order in which replicas are created holds no impact on end usersâ€”they remain unaware of which replica fulfills their request.

### Parallel Operations

To enable simultaneous launching or termination, incorporate the line `podManagementPolicy: Parallel` within `values.yaml`. Then, refer to it in `statefulset.yaml` using `podManagementPolicy: {{ .Values.podManagementPolicy }}`. This setup effortlessly facilitates parallel execution for both launch and termination processes.
