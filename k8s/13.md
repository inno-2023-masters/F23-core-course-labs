## Task 1: Implement StatefulSet in Helm Chart

`helm secrets install python ./app_python/ --values ./app_python/values.python.yml`

Output:
```
NAME: my-app
LAST DEPLOYED: Mon Dec 11 22:06:35 2023
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
1. Get the application URL by running these commands:
  export NODE_PORT=$(kubectl get --namespace default -o jsonpath="{.spec.ports[0].nodePort}" services my-app)
  export NODE_IP=$(kubectl get nodes --namespace default -o jsonpath="{.items[0].status.addresses[0].address}")
  echo http://$NODE_IP:$NODE_PORT
removed './secrets.yaml.dec'
```

## Task 2: StatefulSet Exploration and Optimization

`kubectl get po,sts,svc,pvc`

Output:
```
NAME                                        READY   STATUS    RESTARTS       AGE
pod/my-app-0                                1/1     Running   0              75s
pod/my-app-app-1                            1/1     Running   0              75s
pod/python-my-app-0                         1/1     Running   0              3m14s
pod/python-my-app-1                         1/1     Running   0              3m14s
pod/python-my-app-2                         1/1     Running   0              3m14s
pod/vault-0                                 1/1     Running   5 (12m ago)    8d
pod/vault-agent-injector-5cd8b87c6c-hcw9q   1/1     Running   5 (99m ago)    8d

NAME                                 READY   AGE
statefulset.apps/python-python-app   3/3     3m13s
statefulset.apps/vault               1/1     8d

NAME                               TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)             AGE
service/kubernetes                 ClusterIP      10.93.0.1        <none>        443/TCP             15d
service/python-my-app              LoadBalancer   10.102.65.81     <pending>     5000:30627/TCP      2m28s
service/vault                      ClusterIP      10.100.180.110   <none>        8200/TCP,8201/TCP   8d
service/vault-agent-injector-svc   ClusterIP      10.106.23.126    <none>        443/TCP             8d
service/vault-internal             ClusterIP      None             <none>        8200/TCP,8201/TCP   8d

NAME                                                             STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
persistentvolumeclaim/my-app-metric-my-app-0   Bound    pvc-81d5bf15-1c32-79dc-5f3e-4d3158df47c5   6Mi        RWO            standard       17m
persistentvolumeclaim/my-app-metric-my-app-1   Bound    pvc-f46d705b-a325-2cf3-912a-64fc381ba451   6Mi        RWO            standard       17m
persistentvolumeclaim/my-app-metric-my-app-2   Bound    pvc-abffc362-24c3-6c36-93f2-16acd2881530   6Mi        RWO            standard       17m
```

### Number of visits

`cat /proc/1/root/app/data/visits.json`

```
[{"ip": "127.0.0.1", "time": "18:09:47"}, {"ip": "127.0.0.1", "time": "18:09:48"}, {"ip": "127.0.0.1", "time": "18:09:49"}, {"ip": "127.0.0.1", "time": "18:09:52"}, {"ip": "127.0.0.1", "time": "18:09:54"}, {"ip": "127.0.0.1", "time": "18:09:55"}, {"ip": "127.0.0.1", "time": "18:09:56"}, {"ip": "127.0.0.1", "time": "18:09:57"}, {"ip": "127.0.0.1", "time": "18:09:57"}, {"ip": "127.0.0.1", "time": "18:09:58"}, {"ip": "127.0.0.1", "time": "18:09:59"}, {"ip": "127.0.0.1", "time": "18:09:59"}]
```

### Questions

1. As evident, the visits to each pod vary because each pod has its own persistent volume and the LoadBalancer distributes requests among the pods.
2. Parallel pod management policy can be set in values.yaml in order to launch or terminate pods in parallel: `PodManagementPolicy: Parallel`