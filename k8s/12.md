# Lab12 Kubernetes ConfigMaps Lab12


## Task 1

The app and the Ansible deploy role have been updated.
Before deploying the app, Ansible will generate a volume and a template file.

## Task 2

### Chart Creation

`helm install app . --values values.yaml`

```
NAME: python
LAST DEPLOYED: Mon Dec 11 11:05:37 2023
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
1. Get the application URL by running these commands:
  export NODE_PORT=$(kubectl get --namespace default -o jsonpath="{.spec.ports[0].nodePort}" services python-helm-app-python)
  export NODE_IP=$(kubectl get nodes --namespace default -o jsonpath="{.items[0].status.addresses[0].address}")
  echo http://$NODE_IP:$NODE_PORT
```
### Pods

`kubectl get pods,svc`

```
NAME                              READY   STATUS    RESTARTS   AGE
pod/app-python-86b44b58ff-6mn8p   1/1     Running   0          39s

NAME                         TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
service/app-python           LoadBalancer   10.102.24.74    <pending>     5000:30495/TCP   39s
service/kubernetes           ClusterIP      10.96.0.1       <none>        443/TCP          12d
...

`kubectl get pods,svc`

```
NAME                              READY   STATUS    RESTARTS   AGE
pod/app-python-86b44b58ff-6mn8p   1/1     Running   0          61s

NAME                         TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
service/app-python           LoadBalancer   10.102.24.74    <pending>     5000:30495/TCP   61s
service/kubernetes           ClusterIP      10.96.0.1       <none>        443/TCP          12d
...

### Getting Data

`cat /config.json`

```
{"key":"value"}
```

### Check the ConfigMap

`kubectl get configmap`

```
NAME               DATA   AGE
kube-root-ca.crt   1      1m12s
configmap          1      1m24s
```